// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

abstract contract LegacyDeployer {
    function _deployPuzzle2() internal returns (address deployed) {
        bytes memory byteCode = hex"608060405234801561001057600080fd5b5061033b806100206000396000f3fe6080604052600436106100555760003560e01c80636fab5ddf1461005a5780638aa96f38146100645780638da5cb5b14610079578063a2dea26f146100aa578063abaa9916146100dd578063ffd40b56146100e5575b600080fd5b61006261012a565b005b34801561007057600080fd5b5061006261015a565b34801561008557600080fd5b5061008e6101e8565b604080516001600160a01b039092168252519081900360200190f35b3480156100b657600080fd5b50610062600480360360208110156100cd57600080fd5b50356001600160a01b03166101f7565b61006261025d565b3480156100f157600080fd5b506101186004803603602081101561010857600080fd5b50356001600160a01b0316610289565b60408051918252519081900360200190f35b600180546001600160a01b0319163317908190556001600160a01b03166000908152602081905260409020349055565b6001546001600160a01b031633146101b9576040805162461bcd60e51b815260206004820152601760248201527f63616c6c6572206973206e6f7420746865206f776e6572000000000000000000604482015290519081900360640190fd5b60405133904780156108fc02916000818181858888f193505050501580156101e5573d6000803e3d6000fd5b50565b6001546001600160a01b031681565b6001600160a01b03811660009081526020819052604090205461021957600080fd5b6001600160a01b03811660008181526020819052604080822054905181156108fc0292818181858888f19350505050158015610259573d6000803e3d6000fd5b5050565b3360009081526020819052604090205461027790346102a4565b33600090815260208190526040902055565b6001600160a01b031660009081526020819052604090205490565b6000828201838110156102fe576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b939250505056fea26469706673582212206e1e024b9ef4be283f442e1078c4d138740b00936e1fc51f904b58945a32bc4264736f6c634300060c0033";
        deployed = _deployContractByteCode(byteCode);
    }

    function _deployPuzzle5(uint256 constructorArg) internal returns (address deployed) {
        bytes memory byteCode = hex"608060405234801561001057600080fd5b506040516101ab3803806101ab8339818101604052602081101561003357600080fd5b5051600181905533600090815260208190526040902055610152806100596000396000f3fe608060405234801561001057600080fd5b50600436106100415760003560e01c806318160ddd1461004657806370a0823114610060578063a9059cbb14610086575b600080fd5b61004e6100c6565b60408051918252519081900360200190f35b61004e6004803603602081101561007657600080fd5b50356001600160a01b03166100cc565b6100b26004803603604081101561009c57600080fd5b506001600160a01b0381351690602001356100e7565b604080519115158252519081900360200190f35b60015481565b6001600160a01b031660009081526020819052604090205490565b33600090815260208190526040808220805484900390556001600160a01b03939093168152919091208054909101905560019056fea26469706673582212204ebd170bffe52c1f519e9c7ea7779a87ae0135b93c7ddf16f28af4e06479917064736f6c634300060c0033";
        deployed = _deployWithUint256(byteCode, constructorArg);
    }

    function _deployPuzzle10() internal returns (address deployed) {
        bytes memory byteCode = hex"608060405234801561001057600080fd5b50610296806100206000396000f3fe6080604052600436106100425760003560e01c8062362a951461004e57806327e235e3146100765780632e1a7d4d146100bb57806370a08231146100e557610049565b3661004957005b600080fd5b6100746004803603602081101561006457600080fd5b50356001600160a01b0316610118565b005b34801561008257600080fd5b506100a96004803603602081101561009957600080fd5b50356001600160a01b0316610157565b60408051918252519081900360200190f35b3480156100c757600080fd5b50610074600480360360208110156100de57600080fd5b5035610169565b3480156100f157600080fd5b506100a96004803603602081101561010857600080fd5b50356001600160a01b03166101e4565b6001600160a01b03811660009081526020819052604090205461013b90346101ff565b6001600160a01b03909116600090815260208190526040902055565b60006020819052908152604090205481565b3360009081526020819052604090205481116101e157604051600090339083908381818185875af1925050503d80600081146101c1576040519150601f19603f3d011682016040523d82523d6000602084013e6101c6565b606091505b50503360009081526020819052604090208054849003905550505b50565b6001600160a01b031660009081526020819052604090205490565b600082820183811015610259576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b939250505056fea264697066735822122016e899464d77233e4282adc067bff064ac6847c1d1ee6c12544bdf99895571e064736f6c634300060c0033";
        deployed = _deployContractByteCode(byteCode);
    }

    function _deployPuzzle19() internal returns (address deployed) {
        bytes memory byteCode = hex"6080604052600080546001600160a01b031916331790556104e1806100256000396000f3fe608060405234801561001057600080fd5b506004361061009e5760003560e01c80638da5cb5b116100665780638da5cb5b146100fc5780638f32d59b1461012057806394bd756914610128578063b5c645bd14610157578063f2fde38b146101745761009e565b80630339f300146100a3578063328b52cb146100c857806333a8c45a146100d057806347f57b32146100ec578063715018a6146100f4575b600080fd5b6100c6600480360360408110156100b957600080fd5b508035906020013561019a565b005b6100c66101cb565b6100d86101e0565b604080519115158252519081900360200190f35b6100c66101f0565b6100c6610219565b6101046102bc565b604080516001600160a01b039092168252519081900360200190f35b6100d86102cc565b6101456004803603602081101561013e57600080fd5b50356102dd565b60408051918252519081900360200190f35b6100c66004803603602081101561016d57600080fd5b50356102fb565b6100c66004803603602081101561018a57600080fd5b50356001600160a01b0316610342565b600054600160a01b900460ff166101ad57fe5b80600183815481106101bb57fe5b6000918252602090912001555050565b6000805460ff60a01b1916600160a01b179055565b600054600160a01b900460ff1681565b600054600160a01b900460ff1661020357fe5b600180549061021690600019830161043f565b50565b6102216102cc565b610272576040805162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015290519081900360640190fd5b600080546040516001600160a01b03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600080546001600160a01b0319169055565b6000546001600160a01b03165b90565b6000546001600160a01b0316331490565b600181815481106102ea57fe5b600091825260209091200154905081565b600054600160a01b900460ff1661030e57fe5b6001805480820182556000919091527fb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf60155565b61034a6102cc565b61039b576040805162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015290519081900360640190fd5b610216816001600160a01b0381166103e45760405162461bcd60e51b81526004018080602001828103825260268152602001806104876026913960400191505060405180910390fd5b600080546040516001600160a01b03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600080546001600160a01b0319166001600160a01b0392909216919091179055565b81548183558181111561046357600083815260209020610463918101908301610468565b505050565b6102c991905b80821115610482576000815560010161046e565b509056fe4f776e61626c653a206e6577206f776e657220697320746865207a65726f2061646472657373a265627a7a723158207c3e0ea6bc68b3190d32f51c6a856097a893e9344514484abafff2e6a39bad4164736f6c63430005110032";
        deployed = _deployContractByteCode(byteCode);
    }

    function _deployContractByteCode(bytes memory bytecode) private returns (address deployed) {
        assembly {
            deployed := create(0, add(bytecode, 0x20), mload(bytecode))
        }
    }

    function _deployWithUint256(bytes memory bytecode, uint256 constructorArg) private returns (address deployed) {
        uint256 codeLength = bytecode.length;
        uint256 totalLength = codeLength + 32;

        bytes memory fullCode = new bytes(totalLength);

        assembly {
            let codePtr := add(bytecode, 0x20)
            let fullPtr := add(fullCode, 0x20)

        // Copy creation code
            for { let i := 0 } lt(i, codeLength) { i := add(i, 0x20) } {
                mstore(add(fullPtr, i), mload(add(codePtr, i)))
            }

        // Append constructor argument
            mstore(add(fullPtr, codeLength), constructorArg)

        // Deploy contract
            deployed := create(0, fullPtr, totalLength)
        }

        require(deployed != address(0), "Deployment failed");
    }
}